@using Microsoft.AspNetCore.Identity
@using EntityProject
@using InfrastructureProject
@inject UserManager<ApplicationUser> UserManager
@inject AppDbContext _context
@using System.Linq;

@{
    ApplicationUser user = await UserManager.GetUserAsync(User);
    var picture = _context.profilePictures.Where(c => c.UserProfile.Id == user.Id).FirstOrDefault();
}

@{
    ViewBag.Title = "Profile";
}


<div class="row">
    <div class="col-md-5">
</div>
    </div>

        @*<form method="post" enctype="multipart/form-data" asp-controller="Profile" asp-action="Index">
                <p id='name'>
                    <label>Name</label>
                    <input type='text' name="Name" value="@user.Name" />
                </p>
                <p id='phone-number'>
                    <label>Phone Number</label>
                    <input type='number' name="PhoneNumber" value=@user.PhoneNumber />
                </p>
                <p id='present-address'>
                    <label>Present Address</label>
                    <input type='text' name="Address" value=@user.Address />
                </p>
                <p id='date-of-birth'>
                    <label>Date Of Birth</label>
                    <input type='date' name="DateofBirth" value=@user.DateofBirth.ToString("yyyy-MM-dd") />
                </p>

                <p id='password'>
                    <label>Password</label>
                    <input type='password' name="Password" required />
                </p>

                <div class="form-group">
                    <div class="col-md-10">
                        <p>Upload profile picture</p>
                        <input class="form-control" name="File" type="file" />
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-10">
                        <input class="btn btn-success" type="submit" value="Update" />
                    </div>
                </div>
            </form>*@

        <div class="container bootstrap snippets bootdey">
            <div class="panel-body inf-content">
                <div class="row">
                    <div class="col-md-4">

                        @{
                            if (picture != null)
                            {
                                <img alt="" height="260" width="260" title="" class="rounded-circle"
                                     src="~/@picture.ProfilePicturePath"
                                     data-original-title="Usuario">
                            }
                            else
                            {
                                <img alt="" height="260" width="260" title="" class="rounded-circle"
                                     src="https://bootdey.com/img/Content/avatar/avatar7.png"
                                     data-original-title="Usuario">
                            }
                        }


                    </div>
                    <div class="col-md-6 card" style="background-color:#FFF">
                        <div class="card-header">
                            Update Profile
                        </div>
                        <div class="table-responsive">
                            <form method="post" enctype="multipart/form-data" asp-controller="Profile" asp-action="Index">
                                <table class="table table-user-information">
                                    <tbody>
                                        <tr>
                                            <td>
                                                <strong>
                                                    <span class="glyphicon glyphicon-user text-primary"></span>
                                                    Name
                                                </strong>
                                            </td>
                                            <td class="text-primary">
                                                <p id='name'>
                                                    <input type='text' size="40" name="Name" value="@user.Name" />
                                                </p>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td>
                                                <strong>
                                                    <span class="glyphicon glyphicon-bookmark text-primary"></span>
                                                    Username
                                                </strong>
                                            </td>
                                            <td class="text-primary">
                                                <p id='email'>
                                                    <input type='text' size="40" name="UserName" value="@user.UserName" />
                                                </p>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td>
                                                <strong>
                                                    <span class="glyphicon glyphicon-envelope text-primary"></span>
                                                    Email
                                                </strong>
                                            </td>
                                            <td class="text-primary">
                                                <p id='email'>
                                                    <input type='text' size="40" name="Email" value="@user.Email" />
                                                </p>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>
                                                    <span class="glyphicon glyphicon-calendar text-primary"></span>
                                                    Phone No
                                                </strong>
                                            </td>
                                            <td class="text-primary">
                                                <p id='phone-number'>
                                                    <input type='number' size="40" name="PhoneNumber" value="@user.PhoneNumber" />
                                                </p>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>
                                                    <span class="glyphicon glyphicon-calendar text-primary"></span>
                                                    Adderss
                                                </strong>
                                            </td>
                                            <td class="text-primary">
                                                <p id='present-address'>
                                                    <input type='text' size="40" name="Address" value="@user.Address" />
                                                </p>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>
                                                    <span class="glyphicon glyphicon-eye-open text-primary"></span>
                                                    Date of Birth
                                                </strong>
                                            </td>
                                            <td class="text-primary">
                                                <p id='date-of-birth'>
                                                    <input type='date' size="40" name="DateofBirth" value="@user.DateofBirth.ToString("yyyy-MM-dd")" />
                                                </p>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>
                                                    <span class="glyphicon glyphicon-eye-open text-primary"></span>
                                                    Password
                                                </strong>
                                            </td>
                                            <td class="text-primary">
                                                <p id='password'>
                                                    <input type='password' size="40" name="Password" required />
                                                </p>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="form-group">
                                    <div class="col-md-10">
                                        <p>Upload profile picture</p>
                                        <input class="form-control" name="File" type="file" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-10">
                                        <input class="btn btn-success" type="submit" value="Update" />
                                    </div>
                                </div>
                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </div>
